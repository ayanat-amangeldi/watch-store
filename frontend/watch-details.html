<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Watch Details | SÃœLU</title>

<link rel="stylesheet" href="./css/header.css">

<style>

:root {
  --primary: #1C2A3A;
  --gold: #B89B5E;
}

body {
  margin: 0;
  font-family: "Inter", sans-serif;
  background: #F6F6F4;
}

.container {
  padding: 100px 120px;
  display: flex;
  gap: 80px;
}

.image {
  flex: 1;
}

.image img {
  width: 100%;
  border-radius: 14px;
  box-shadow: 0 20px 50px rgba(0,0,0,0.08);
}

.info {
  flex: 1;
}

.info h1 {
  font-size: 42px;
  margin-bottom: 20px;
}

.price {
  font-size: 24px;
  font-weight: 600;
  color: var(--primary);
  margin-bottom: 30px;
}

.spec-box {
  background: white;
  padding: 30px;
  border-radius: 12px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.05);
}

.spec-box h3 {
  margin-bottom: 20px;
}

.spec-box div {
  margin-bottom: 10px;
  color: #555;
}

.stock {
  margin-top: 20px;
  color: var(--gold);
  font-weight: 600;
}

button {
  margin-top: 30px;
  padding: 14px 30px;
  background: var(--primary);
  color: white;
  border: none;
  cursor: pointer;
  font-size: 16px;
}

button:hover {
  background: #16212d;
}

</style>
</head>
<body>

<div id="header"></div>

<div class="container">
  <div class="image">
    <img id="image">
  </div>

  <div class="info">
    <h1 id="title"></h1>
    <div class="price" id="price"></div>

    <div class="spec-box">
      <h3>Specifications</h3>
      <div><strong>Movement:</strong> <span id="movement"></span></div>
      <div><strong>Case Material:</strong> <span id="material"></span></div>
      <div><strong>Water Resistance:</strong> <span id="water"></span></div>
      <div class="stock" id="stock"></div>
    </div>

    <button onclick="addToCart()">Add to Cart</button>
  </div>
</div>

<script>
const API = "http://localhost:3000/api/v1";
const id = new URLSearchParams(window.location.search).get("id");

async function loadWatch() {
  const res = await fetch(API + "/watches/" + id);
  const w = await res.json();

  document.getElementById("image").src =
    w.imageUrl ||
    "https://images.unsplash.com/photo-1609587312208-cea54be969e7";

  document.getElementById("title").textContent = w.model;
  document.getElementById("price").textContent = "$" + w.price;

  document.getElementById("movement").textContent =
    w.specs?.movement || "-";

  document.getElementById("material").textContent =
    w.specs?.caseMaterial || "-";

  document.getElementById("water").textContent =
    w.specs?.waterResistance || "-";

  document.getElementById("stock").textContent =
    w.stock > 0 ? "In stock" : "Out of stock";
}

async function addToCart() {
  const token = localStorage.getItem("token");
  if (!token) {
    alert("Please login first");
    return;
  }

  await fetch(API + "/cart/items", {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
      Authorization: `Bearer ${token}`
    },
    body: JSON.stringify({ watchId: id, quantity: 1 })
  });

  alert("Added to cart");
}

loadWatch();
</script>

</body>
</html>
